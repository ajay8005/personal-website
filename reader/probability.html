<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Probability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5d2e30ad26079c1dae90a1fd11eba2b9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script async="" src="https://siteimproveanalytics.com/js/siteanalyze_6294756.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../assets/styles.css">
</head>

<body class="quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-a-probability" id="toc-what-is-a-probability" class="nav-link active" data-scroll-target="#what-is-a-probability">What is a probability?</a></li>
  <li><a href="#probability-as-a-measure" id="toc-probability-as-a-measure" class="nav-link" data-scroll-target="#probability-as-a-measure">Probability as a measure</a></li>
  <li><a href="#measures" id="toc-measures" class="nav-link" data-scroll-target="#measures">Measures</a></li>
  <li><a href="#integrals" id="toc-integrals" class="nav-link" data-scroll-target="#integrals">Integrals</a></li>
  <li><a href="#densities" id="toc-densities" class="nav-link" data-scroll-target="#densities">Densities</a></li>
  <li><a href="#probability-spaces-and-random-variables" id="toc-probability-spaces-and-random-variables" class="nav-link" data-scroll-target="#probability-spaces-and-random-variables">Probability spaces and random variables</a></li>
  <li><a href="#conditional-probability" id="toc-conditional-probability" class="nav-link" data-scroll-target="#conditional-probability">Conditional probability</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Probability</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><span class="math display">\[
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\EE}{\mathbb{E}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\td}{\,\textrm{d}}
\newcommand{\simiid}{\stackrel{\textrm{i.i.d.}}{\sim}}
\newcommand{\simind}{\stackrel{\textrm{ind.}}{\sim}}
\newcommand{\eqas}{\stackrel{\textrm{a.s.}}{=}}
\newcommand{\eqPas}{\stackrel{\cP\textrm{-a.s.}}{=}}
\newcommand{\eqmuas}{\stackrel{\mu\textrm{-a.s.}}{=}}
\newcommand{\eqD}{\stackrel{D}{=}}
\newcommand{\indep}{\perp\!\!\!\!\perp}
\DeclareMathOperator*{\minz}{minimize\;}
\DeclareMathOperator*{\maxz}{minimize\;}
\DeclareMathOperator*{\argmin}{argmin\;}
\DeclareMathOperator*{\argmax}{argmax\;}
\newcommand{\Var}{\textnormal{Var}}
\newcommand{\Cov}{\textnormal{Cov}}
\newcommand{\Corr}{\textnormal{Corr}}
\]</span></p>
<section id="what-is-a-probability" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-probability">What is a probability?</h2>
<p>There is some philosophical controversy about what probability is. Roughly speaking, there are two common answers:</p>
<ol type="1">
<li><p><strong>Frequentist answer:</strong> Probability represents a relative frequency of an outcome when an experiment is repeated many times.</p></li>
<li><p><strong>Bayesian answer:</strong> Probability represents a degree of belief that something is true, or that something will happen.</p></li>
</ol>
<p>People who give the first answer tend to be doubtful that we can meaningfully assign probabilities to everything. There is no sense in which the next presidential election is an experiment that we can repeat. Below is a list of outcomes that seem more and more difficult to assign probabilities to. Think about where you would stop agreeing that probability is a meaningful construct:</p>
<ul>
<li><p><strong>The probability that a (roughly) physically symmetrical die will roll 4 on the next toss:</strong> most people, regardless of their metaphysical views about probability, would probably agree on <span class="math inline">\(1/6\)</span>, whether it is because they can imagine the die being tossed many times, because they believe the die has an equal physical propensity to land on any given face, or because they think we should be subjectively indifferent between any of the six outcomes.</p></li>
<li><p><strong>The probability that a radiation treatment will be successful for a given cancer patient:</strong> we could probably give some answer based on the fraction of patients for whom the treatment is successful, but we have to be careful about what comparison group to use: we should probably only include patients whose cancer is at a similar stage and who are roughly the same age, but perhaps we should take into account other factors like the patient’s family history, other aspects of their health profile, the cancer’s genetic profile, etc. By the time we get done conditioning on everything that might matter, the patient may be the only person left in our comparison class.</p></li>
<li><p><strong>The probability that the Democratic candidate will win the next presidential election:</strong> every presidential election is a truly one-off event, and anyone whose opinion is worth listening to can probably list a few important aspects of this election that are more or less unprecedented.</p></li>
<li><p><strong>The probability that a given subatomic particle has the mass predicted by a certain physical theory:</strong> this is not the probability that <em>something will happen</em> but a probability that <em>something is true about the world</em>. Whether it is true or false, it has been so since the creation of the universe.</p></li>
<li><p><strong>The probability that P = NP (as a statement about computational complexity theory):</strong> whether or not this is true is a purely mathematical question, but it is one that may or may not be resolved in our lifetime.</p></li>
<li><p><strong>The probability that the 20th digit of</strong> <span class="math inline">\(\sqrt{2}\)</span> <strong>is 5:</strong> this is another mathematical question that you could probably work out for yourself in a few minutes with just a pencil and paper and no new data about the world, so it seems perverse to think of it as random. Still, if you were forced to place a bet and didn’t have time to work it out you might assign a <span class="math inline">\(10\%\)</span> probability.</p></li>
</ul>
<p>The two great statistical frameworks of frequentist and Bayesian statistics loosely correspond to the two views about probability above. Generally speaking, Bayesians get a lot of mileage out of being willing to assign probabilities to everything, while frequentists try to take a more conservative course where possible, allowing some quantities to simply be unknown.</p>
<p>A great deal of ink has been spilled about whether one approach is superior to another. Fifty years ago, it was more common for statisticians to be dogmatically committed to one or the other view, but nowadays the mainstream view is that both approaches have strengths and weaknesses, and which framework to use is a pragmatic choice that should be made on a case-by-case basis.</p>
<p>Fortunately, the philosophical and methodological disagreements between frequentists and Bayesians are not disagreements about the mathematical construct of probability, only questions about how and when these mathematical formalisms should be connected to real-world questions. There is very little controversy about how we should conceive of probability mathematically. This leads us to our third answer:</p>
<ol start="3" type="1">
<li><strong>Mathematical answer:</strong> a probability is a measure <span class="math inline">\(P\)</span> on a sample space <span class="math inline">\(\cX\)</span>, which assigns total measure <span class="math inline">\(1\)</span> to the sample space.</li>
</ol>
<!-- function $P$ mapping (non-pathological[^1]) subsets of a sample space $\cX$ to a number in $[0,1]$, for which $P(\cX) = 1$ and which is **additive** over disjoint subsets, meaning -->
<!-- [^1]: A problem in the first homework will guide you step-by-step in constructing the kind of pathological set that makes the parenthetical caveat necessary when we are dealing with continuous spaces. -->
<!-- $$ -->
<!-- P\left(\bigcup_{i=1}^\infty A_i\right) = \sum_{i=1}^\infty P(A_i), \quad \text{ if } A_i \cap A_j = \emptyset \text{ for all } i \neq j. -->
<!-- $$ -->
</section>
<section id="probability-as-a-measure" class="level2">
<h2 class="anchored" data-anchor-id="probability-as-a-measure">Probability as a measure</h2>
<p><strong>Measure theory</strong> is an area of mathematics concerned with measuring the “size” of subsets of a certain set. Soon after it was developed in the the early twentieth century, the great Soviet mathematician Kolmogorov realized it could be applied to give a rigorous grounding to probability theory, it was a major advance in understanding and resolving certain <a href="https://en.wikipedia.org/wiki/Bertrand_paradox_(probability)">paradoxes</a> in probability theory. David Aldous gives a nice <a href="https://www.stat.berkeley.edu/~aldous/Real_World/kolmogorov.html">discussion</a> of this history.</p>
<p>This is not a course on measure-theoretic probability and we will not rigorously develop the subject. However, it will be useful to draw on some of the basics of measure theory, because the subject clarifies the meaning of conditioning and allows us to simplify our notation; for example, the measure-theoretic idea of a density includes both probability density functions and probability mass functions, allowing us to cleanly state results that apply both to discrete and continuous random variables, as well as to discrete-continuous mixtures, random graphs, and even random variables defined on more exotic sample spaces like manifolds.</p>
</section>
<section id="measures" class="level2">
<h2 class="anchored" data-anchor-id="measures">Measures</h2>
<p>Given a set <span class="math inline">\(\cX\)</span>, a measure <span class="math inline">\(\mu\)</span> is a certain kind of function mapping (non-pathological<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>) subsets <span class="math inline">\(A \subseteq \cX\)</span> to non-negative numbers <span class="math inline">\(\mu(A) \in [0,\infty]\)</span>.</p>
<p><strong>Example 1 (Counting measure):</strong> If <span class="math inline">\(\cX\)</span> is countable, e.g.&nbsp;<span class="math inline">\(\cX = \mathbb{Z}\)</span>, then a natural measure is the <em>counting measure</em> <span class="math inline">\(\#(A)\)</span><em>,</em> which simply counts the number of points in a subset <span class="math inline">\(A\)</span>. That is, <span class="math inline">\(\#(\{0,1\}) = 2\)</span>, and <span class="math inline">\(\#(\{2,4,6,8,\ldots\}) = \infty\)</span> .</p>
<p><strong>Example 2 (Lebesgue measure):</strong> If <span class="math inline">\(\cX = \RR^n\)</span> for some integer <span class="math inline">\(n\)</span>, a natural measure is the <em>Lebesgue measure</em> <span class="math inline">\(\lambda(A)\)</span>, which returns the <em>volume</em> of a subset <span class="math inline">\(A\)</span>. Roughly speaking, we can write</p>
<p><span class="math display">\[
\lambda(A) = \int \cdots \int_A \,d x_1\,d x_2\cdots \,d x_n.
\]</span></p>
<p><strong>Example 3 (Gaussian measure):</strong> Now taking <span class="math inline">\(\cX = \RR\)</span>, we might instead want to define the “size” of a set as the probability that a standard Gaussian random variable <span class="math inline">\(Z \sim \cN(0,1)\)</span> is observed to be in the set <span class="math inline">\(A\)</span>. That is, we can define the measure:</p>
<p><span class="math display">\[
P_Z(A) = \PP(Z \in A) = \int_A \phi(x)\,d x, \quad \text{ where } \;\phi(x) = \frac{1}{\sqrt{2\pi}} e^{-x^2/2}
\]</span></p>
<p>is the probability density function of <span class="math inline">\(Z\)</span>.</p>
<p>As it turns out, it is not so obvious how to define what exactly we mean by taking an integral when the set is sufficiently pathological: some sets are just called <em>non-measurable</em> and we can’t hope to meaningfully assign them a measure. Sets of this kind are important to consider when building a rigorous theory about measures but they are not the sort of thing you would stumble upon unless you went out looking for them.</p>
<p>One of the original motivations for measure theory was to provide a framework for excluding these pathological sets and rigorously defining integrals over the other, nicer sets. In general, the domain of a measure is not all subsets of <span class="math inline">\(\cX\)</span> (called the power set and notated <span class="math inline">\(2^{\cX}\)</span>), but rather a collection of “nice enough” subsets <span class="math inline">\(\cF \subseteq 2^{\cX}\)</span>.</p>
<p>Formally, the collection <span class="math inline">\(\cF\)</span> must be a <span class="math inline">\(\sigma\)</span>-field, meaning that it satisfies certain closure properties. We say <span class="math inline">\(\cF\)</span> is a <span class="math inline">\(\sigma\)</span>-<em>field</em> (or <span class="math inline">\(\sigma\)</span>-<em>algebra</em>) if</p>
<ol type="1">
<li><p>The full set <span class="math inline">\(\cX\)</span> is in <span class="math inline">\(\cF\)</span>.</p></li>
<li><p>If <span class="math inline">\(A\)</span> is in <span class="math inline">\(\cF\)</span> then its complement <span class="math inline">\(\cX \setminus A\)</span> is also in <span class="math inline">\(\cF\)</span> (i.e., <span class="math inline">\(\cF\)</span> is <em>closed under complementation</em>)</p></li>
<li><p>If <span class="math inline">\(A_1,A_2,\ldots \in \cF\)</span> then <span class="math inline">\(\bigcup_{i=1}^\infty A_i\)</span> is also in <span class="math inline">\(\cF\)</span> (i.e.&nbsp;<span class="math inline">\(\cF\)</span> is <em>closed under countable unions</em>)</p></li>
</ol>
<p>The details of this definition are not important for purposes of this course.</p>
<p><strong>Example:</strong> If <span class="math inline">\(\cX\)</span> is countable we can take <span class="math inline">\(\cF\)</span> to be the entire power set.</p>
<p><strong>Example:</strong> If <span class="math inline">\(\cX = \mathbb{R}^n\)</span> we will typically use the <em>Borel</em> <span class="math inline">\(\sigma\)</span>-<em>field</em> <span class="math inline">\(\cB\)</span>, defined as the smallest <span class="math inline">\(\sigma\)</span>-field that includes all open rectangles <span class="math inline">\((a_1,b_1)\times (a_2,b_2) \times \cdots \times (a_n, b_n)\)</span>, where <span class="math inline">\(a_i &lt; b_i\)</span> for all <span class="math inline">\(i\)</span>. That is, we start with the open rectangles and recursively apply the closure properties to obtain a very large collection of sets, which informally we can think of as containing all non-pathological subsets of <span class="math inline">\(\mathbb{R}^n\)</span>.</p>
<p>We are now ready to define a measure. We call a pair of a set <span class="math inline">\(\cX\)</span> and an associated <span class="math inline">\(\sigma\)</span>-field <span class="math inline">\(\cF \subseteq 2^{\cX}\)</span> a <em>measurable space</em>.</p>
<p><strong>Definition:</strong> Given a measurable space <span class="math inline">\((\cX, \cF)\)</span>, a <em>measure</em> is a function <span class="math inline">\(\mu: \cF \to [0,\infty]\)</span> (inclusive of <span class="math inline">\(+\infty\)</span>) satisfying three properties:</p>
<ol type="1">
<li><p><strong>Non-negativity:</strong> <span class="math inline">\(\mu(A) \geq 0\)</span> for all <span class="math inline">\(A\in \cF\)</span>.</p></li>
<li><p><strong>Countable additivity:</strong> If <span class="math inline">\(A_1,A_2,\ldots\in \cF\)</span> are all disjoint, then</p></li>
</ol>
<p><span class="math display">\[
\mu\left(\bigcup_{i=1}^\infty A_i\right) = \sum_{i=1}^\infty \mu(A_i)
\]</span></p>
<ol start="3" type="1">
<li><strong>Empty set maps to zero:</strong> <span class="math inline">\(\mu(\emptyset) = 0\)</span><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></li>
</ol>
<p>If <span class="math inline">\(\mu\)</span> is a measure on <span class="math inline">\((\cX, \cF)\)</span> we call <span class="math inline">\((\cX, \cF, \mu)\)</span> a <em>measure space</em>. In the special case <span class="math inline">\(\mu(\cX) = 1\)</span>, we call <span class="math inline">\(\mu\)</span> a <em>probability measure</em> and <span class="math inline">\((\cX, \cF, \mu)\)</span> is called a <em>probability space</em>.</p>
</section>
<section id="integrals" class="level2">
<h2 class="anchored" data-anchor-id="integrals">Integrals</h2>
<p>One very nice thing about measures is that they let us define integrals of (nice enough) real-valued functions on <span class="math inline">\(\cX\)</span> with respect to the measure <span class="math inline">\(\mu\)</span>, meaning the integral is “weighted” in a way that assigns total weight <span class="math inline">\(\mu(A)\)</span> to each set <span class="math inline">\(A\)</span>. We will use the notation <span class="math inline">\(\int f(x)\,\,d\mu(x)\)</span>, or just <span class="math inline">\(\int f \,d\mu\)</span>.</p>
<p>To construct this integral, we begin by defining it for indicator functions, and then extend to more general functions by linearity and limits, in a few steps:</p>
<p>First, for an indicator function <span class="math inline">\(1_A(x) = 1\{x \in A\}\)</span> of a set <span class="math inline">\(A \in \cF\)</span>, it is straightforward to define the integral as <span class="math inline">\(\int 1_A \,d\mu = \mu(A)\)</span> (note if <span class="math inline">\(A \notin \cF\)</span> this does not work, but we are only defining the integral for a class of “nice” functions determined by our <span class="math inline">\(\sigma\)</span>-field)</p>
<p>Next, consider a <em>simple function</em> <span class="math inline">\(f(x) = \sum_{i=1}^\infty c_i 1_{A_i}(x)\)</span>, with all <span class="math inline">\(c_i \geq 0\)</span> and <span class="math inline">\(A_i \in \cF\)</span>. Because the integral should be linear, we should have</p>
<p><span class="math display">\[
\int f\,d\mu = \sum_{i=1}^\infty c_i \int 1_{A_i}\,d\mu = \sum_{i=1}^\infty c_i \mu(A_i)
\]</span></p>
<p>Third, we can extend to all sufficiently nice non-negative functions by approximating them from below with a series of simple functions:</p>
<p><span class="math display">\[
\int f\,d\mu = \lim_{n=1}^\infty \int f_n\,d\mu.
\]</span></p>
<p>For example, we could take the sequence of simple functions <span class="math display">\[f_n(x) = \sum_{k=0}^{\infty} k 2^{-n} 1_{A_{n,k}}(x),\quad \text{ where } A_{n,k} = \left\{x:\; f(x) \in \left[k 2^{-n}, (k+1) 2^{-n}\right)\right\},\]</span> as illustrated in the picture below.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="139" data-source-offset="-37"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 138;"><span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>Plot <span class="op">=</span> <span class="pp">require</span>(<span class="st">"@observablehq/plot"</span>)</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3"</span>)</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="co">// Define the Gaussian function</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">gaussian</span>(x<span class="op">,</span> mu <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> sigma <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (<span class="dv">1</span> <span class="op">/</span> (sigma <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span>))) <span class="op">*</span> </span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span>(<span class="op">-</span><span class="fl">0.5</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>((x <span class="op">-</span> mu) <span class="op">/</span> sigma<span class="op">,</span> <span class="dv">2</span>))<span class="op">;</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a><span class="co">// Define our function f(x) = 3g(x-4) + 5g(x-7)</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f</span>(x) {</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">3</span> <span class="op">*</span> <span class="fu">gaussian</span>(x <span class="op">-</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>) <span class="op">+</span> <span class="fl">4.8</span> <span class="op">*</span> <span class="fu">gaussian</span>(x <span class="op">-</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a slider for 'c'</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>viewof c <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"n"</span>})</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a><span class="co">// Generate x values</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>xValues <span class="op">=</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="op">-</span><span class="dv">2</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> <span class="fl">0.01</span>)</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="co">// Calculate y values</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> xValues<span class="op">.</span><span class="fu">map</span>(x <span class="kw">=&gt;</span> ({x<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fu">f</span>(x)}))</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="co">// Calculate Lebesgue sets with multiple intervals</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">calculateLebesgueSets</span>(data<span class="op">,</span> c) {</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> maxY <span class="op">=</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sets <span class="op">=</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(maxY <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(<span class="dv">2</span><span class="op">,</span> c)))<span class="op">.</span><span class="fu">map</span>(k <span class="kw">=&gt;</span> {</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> lower <span class="op">=</span> k <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(<span class="dv">2</span><span class="op">,</span> <span class="op">-</span>c)<span class="op">;</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> upper <span class="op">=</span> (k <span class="op">+</span> <span class="dv">1</span>) <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(<span class="dv">2</span><span class="op">,</span> <span class="op">-</span>c)<span class="op">;</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> points <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span> <span class="op">&gt;</span> lower <span class="op">&amp;&amp;</span> d<span class="op">.</span><span class="at">y</span> <span class="op">&lt;=</span> upper)<span class="op">;</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (points<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Identify distinct intervals</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> intervals <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> currentInterval <span class="op">=</span> [points[<span class="dv">0</span>]]<span class="op">;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> points<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (points[i]<span class="op">.</span><span class="at">x</span> <span class="op">-</span> points[i<span class="op">-</span><span class="dv">1</span>]<span class="op">.</span><span class="at">x</span> <span class="op">&lt;=</span> <span class="fl">0.011</span>) { <span class="co">// Allow small gaps</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>          currentInterval<span class="op">.</span><span class="fu">push</span>(points[i])<span class="op">;</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>          intervals<span class="op">.</span><span class="fu">push</span>(currentInterval)<span class="op">;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>          currentInterval <span class="op">=</span> [points[i]]<span class="op">;</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>      intervals<span class="op">.</span><span class="fu">push</span>(currentInterval)<span class="op">;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>        k<span class="op">,</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>        lower<span class="op">,</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>        upper<span class="op">,</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>        <span class="dt">intervals</span><span class="op">:</span> intervals<span class="op">.</span><span class="fu">map</span>(interval <span class="kw">=&gt;</span> ({</span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>          <span class="dt">xMin</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">min</span>(interval<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)<span class="op">,</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>          <span class="dt">xMax</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">max</span>(interval<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)<span class="op">,</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>          <span class="dt">points</span><span class="op">:</span> interval</span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>        }))</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">filter</span>(<span class="kw">set</span> <span class="kw">=&gt;</span> <span class="kw">set</span> <span class="op">!==</span> <span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> sets<span class="op">;</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>lebesgueSets <span class="op">=</span> <span class="fu">calculateLebesgueSets</span>(data<span class="op">,</span> c)</span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a><span class="co">// Create the plot</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"gray"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">,</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(lebesgueSets<span class="op">.</span><span class="fu">flatMap</span>(<span class="kw">set</span> <span class="kw">=&gt;</span> <span class="kw">set</span><span class="op">.</span><span class="at">intervals</span><span class="op">.</span><span class="fu">flatMap</span>(int <span class="kw">=&gt;</span> int<span class="op">.</span><span class="at">points</span>))<span class="op">,</span> {</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> </span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> </span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>[lebesgueSets<span class="op">.</span><span class="fu">findIndex</span>(s <span class="kw">=&gt;</span> s<span class="op">.</span><span class="at">intervals</span><span class="op">.</span><span class="fu">some</span>(int <span class="kw">=&gt;</span> int<span class="op">.</span><span class="at">points</span><span class="op">.</span><span class="fu">includes</span>(d))) <span class="op">%</span> <span class="dv">10</span>]<span class="op">,</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>      <span class="dt">r</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">rectY</span>(lebesgueSets<span class="op">.</span><span class="fu">flatMap</span>(<span class="kw">set</span> <span class="kw">=&gt;</span> </span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>      <span class="kw">set</span><span class="op">.</span><span class="at">intervals</span><span class="op">.</span><span class="fu">map</span>(int <span class="kw">=&gt;</span> ({</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x1</span><span class="op">:</span> int<span class="op">.</span><span class="at">xMin</span><span class="op">,</span></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x2</span><span class="op">:</span> int<span class="op">.</span><span class="at">xMax</span><span class="op">,</span></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y2</span><span class="op">:</span> <span class="kw">set</span><span class="op">.</span><span class="at">lower</span><span class="op">,</span></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>        <span class="dt">color</span><span class="op">:</span> <span class="kw">set</span><span class="op">.</span><span class="at">k</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>      }))</span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span> {</span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x1</span><span class="op">:</span> <span class="st">"x1"</span><span class="op">,</span></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x2</span><span class="op">:</span> <span class="st">"x2"</span><span class="op">,</span></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y1</span><span class="op">:</span> <span class="st">"y1"</span><span class="op">,</span></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y2</span><span class="op">:</span> <span class="st">"y2"</span><span class="op">,</span></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>[d<span class="op">.</span><span class="at">color</span> <span class="op">%</span> <span class="dv">10</span>]<span class="op">,</span></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.2</span><span class="op">,</span></span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>[d<span class="op">.</span><span class="at">color</span> <span class="op">%</span> <span class="dv">10</span>]<span class="op">,</span></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.5</span></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>) <span class="op">*</span> <span class="fl">1.1</span>]<span class="op">,</span></span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"f(x)"</span></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="op">-</span><span class="dv">2</span><span class="op">,</span> <span class="dv">13</span>]<span class="op">,</span></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"x"</span></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>    <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">"white"</span></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">800</span><span class="op">,</span></span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-10" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>Finally, we can write any real-valued function as the sum of its positive and negative parts, <span class="math inline">\(f(x) = f^+(x) - f^-(x)\)</span>, where <span class="math inline">\(f^+(x) = \max\{f(x), 0\}\)</span> and <span class="math inline">\(f^-(x) = \max\{-f(x), 0\}\)</span>. Then both <span class="math inline">\(f^+\)</span> and <span class="math inline">\(f^-\)</span> have non-negative (possibly infinite) integrals. Then we simply take</p>
<p><span class="math display">\[
\int f\,d\mu = \int f^+\,d\mu - \int f^-\,d\mu \in [-\infty, \infty],
\]</span></p>
<p>calling the difference undefined if the integrals of both <span class="math inline">\(f^+\)</span> and <span class="math inline">\(f^-\)</span> are infinite.</p>
<p>As a result, we have <span class="math inline">\(\int f\,d\mu\)</span> for any function <span class="math inline">\(f\)</span> whose positive and negative parts can both be approximated from below by simple functions. Note that we have left out some important details in this presentation (for example we have not characterized which functions <span class="math inline">\(f\)</span> are nice enough to be approximated well by simple functions) but these details are unimportant for this class. The important thing to know is that to any measure <span class="math inline">\(\mu\)</span> there corresponds a well-defined integral <span class="math inline">\(\int \cdot \,d\mu\)</span>, which behaves as we would expect it to.</p>
<p>We can now return to our previous examples of measures and ask what the corresponding integrals are:</p>
<p><strong>Example 1, continued (Counting measure):</strong> An integral with respect to <span class="math inline">\(\#\)</span> just adds up all the values of <span class="math inline">\(f(x)\)</span>:</p>
<p><span class="math display">\[
\int f\,d\# = \sum_{x\in \cX} f(x)
\]</span></p>
<p><strong>Example 2, continued (Lebesgue measure):</strong> An integral with respect to the Lebesgue measure is called a <em>Lebesgue integral</em>, which is essentially just the usual integral you are used to from calculus class:</p>
<p><span class="math display">\[
\int f\,d\lambda = \int\cdots \int f(x) \,d x_1 \cdots \,d x_n.
\]</span></p>
<p>The Lebesgue integral extends the Riemann integral to a more general class of functions, in the sense that if the Riemann integral of <span class="math inline">\(f\)</span> is defined then the Lebesgue integral is also well defined and the two integrals coincide. But the Lebesgue integral is also well-defined for functions like <span class="math inline">\(f(x) = 1\{x \in \mathbb{Q}\}\)</span>, for which the Riemann integral is not well-defined (<strong>Exercise:</strong> what is the Lebesgue integral of <span class="math inline">\(1\{x \in \mathbb{Q}\}\)</span>?)</p>
<p><strong>Example 3, continued (Gaussian measure):</strong> Note that <span class="math inline">\(P_Z(A)\)</span> is defined as the (Lebesgue) integral of <span class="math inline">\(1_A(x)\phi(x)\)</span>. By extension, the integral of <span class="math inline">\(f\)</span> with respect to <span class="math inline">\(P_Z\)</span> is the Lebesgue integral of <span class="math inline">\(f(x) \phi(x)\)</span>, which is nothing more than the expectation of <span class="math inline">\(f(Z)\)</span>:</p>
<p><span class="math display">\[
\int f\,d P_Z = \int_{-\infty}^\infty f(x) \phi(x) \,d x = \EE[f(Z)].
\]</span></p>
</section>
<section id="densities" class="level2">
<h2 class="anchored" data-anchor-id="densities">Densities</h2>
<p>We have just seen in the last two examples that there is a special relationship between the Lebesgue measure <span class="math inline">\(\lambda\)</span> on <span class="math inline">\(\RR\)</span> and the Gaussian measure <span class="math inline">\(P_Z\)</span>, allowing us to evaluate integrals with respect to <span class="math inline">\(P_Z\)</span> by turning them into integrals with respect to <span class="math inline">\(\lambda\)</span>, namely <span class="math inline">\(\int f(x)\,d P_Z(x) = \int f(x)\phi(x) \,d\lambda(x)\)</span>.</p>
<p>This is a happy fact: mathematicians have gone to a lot of trouble figuring out how to calculate Lebesgue integrals of various functions, and it’s nice not to have to reinvent the wheel!</p>
<p>Note that we can’t turn integrals for every random variable into Lebesgue integrals. If <span class="math inline">\(Y\)</span> follows a binomial distribution, for example, we can just as well define a probability measure <span class="math inline">\(P_Y(A) = \PP(Y \in A)\)</span>, but there is no counterpart to <span class="math inline">\(\phi\)</span> that would let us turn <span class="math inline">\(P_Y\)</span> integrals into Lebesgue integrals in the same way.</p>
<p>Formally, consider a measurable space <span class="math inline">\((\cX, \cF)\)</span>, with two measures <span class="math inline">\(P\)</span> and <span class="math inline">\(\mu\)</span>. We say <span class="math inline">\(P\)</span> is <em>absolutely continuous with respect to</em> <span class="math inline">\(\mu\)</span> if <span class="math inline">\(P(A) = 0\)</span> whenever <span class="math inline">\(\mu(A) = 0\)</span>. In notation, we write <span class="math inline">\(P \ll \mu\)</span>.</p>
<p>If <span class="math inline">\(P \ll \mu\)</span> then, <a href="https://en.wikipedia.org/wiki/Radon%E2%80%93Nikodym_theorem">under mild conditions</a>, we can always define a <em>density function</em> <span class="math inline">\(p:\cX \mapsto [0,\infty)\)</span> such that</p>
<p><span class="math display">\[
P(A) = \int 1_A(x) p(x)\,d\mu(x), \quad \text{ for all } A \in \cF,
\]</span></p>
<p>and by extension <span class="math inline">\(\int f(x)\,d P(x) = \int f(x) p(x) \,d\mu(x)\)</span>.</p>
<p>The function <span class="math inline">\(p\)</span> is called the <em>density function</em> or <em>Radon-Nikodym derivative</em> of <span class="math inline">\(P\)</span> with respect to <span class="math inline">\(\mu\)</span>. It is sometimes written using the suggestive notation <span class="math inline">\(\frac{\,d P}{\,d\mu}(x)\)</span>. Whenever we have a density function we can turn integrals with respect to <span class="math inline">\(P\)</span> into integrals with respect to <span class="math inline">\(\mu\)</span> simply by multiplying the density <span class="math inline">\(p\)</span> into the integrand.</p>
<p>If we do not specify what <span class="math inline">\(\mu\)</span> is, it is assumed to be the Lebesgue measure; that is, if we say <span class="math inline">\(P\)</span> is <em>absolutely continuous</em> with no further elaboration, we mean <span class="math inline">\(P \ll \lambda\)</span>.</p>
<p>If <span class="math inline">\(P\)</span> is a probability measure and <span class="math inline">\(\mu\)</span> is the Lebesgue measure, then <span class="math inline">\(p(x)\)</span> is a probability density function (pdf). If <span class="math inline">\(\mu\)</span> is a counting measure, we call <span class="math inline">\(p(x)\)</span> the probability mass function (pmf).</p>
</section>
<section id="probability-spaces-and-random-variables" class="level2">
<h2 class="anchored" data-anchor-id="probability-spaces-and-random-variables">Probability spaces and random variables</h2>
<p>In a typical statistics problem we may have multiple random variables, some continuous and some discrete, some random variables may be functions of others, and we want to have good notation for the probability that “something happens,” like <span class="math inline">\(\PP(X^2 &lt; (Y+Z)/ W)\)</span>, or the expectation of a random variable, like <span class="math inline">\(\EE[(XY-ZW)^2]\)</span>. What does this kind of expression have to do with the measures and integrals we have been discussing so far?</p>
<p>If we defined a probability measure <span class="math inline">\(P\)</span> as the joint distribution of <span class="math inline">\((X, Y, Z, W)\)</span> then we could evaluate <span class="math inline">\(P\)</span> on the corresponding subset of the sample space, e.g.&nbsp;<span class="math inline">\(P(\{x,y,z,w :\; x^2 &lt; (y+z)/w\})\)</span>. Or we could write an appropriate integral like <span class="math inline">\(\int (xy-zw)^2\,dP(x,y,z,w)\)</span>. But it is convenient not to have to make things so explicit. To this end, we can introduce the idea of an <em>abstract outcome</em> <span class="math inline">\(\omega\)</span> in an <em>outcome space</em> <span class="math inline">\(\Omega\)</span>, which informally represents “all of the information required to evaluate every random variable in the problem.” Then a <em>random variable</em> is simply any function of <span class="math inline">\(\omega\)</span>, and we can think of <span class="math inline">\(\PP\)</span> as a measure on <span class="math inline">\(\Omega\)</span> and <span class="math inline">\(\EE\)</span> as an integral with respect to <span class="math inline">\(\PP\)</span>. Then our usual way of writing probabilities and expectations become shorthand for the corresponding measure and integral over <span class="math inline">\(\Omega\)</span>; e.g.&nbsp;<span class="math display">\[\PP(X^2 &lt; (Y+Z)/W) = \PP\left(\{\omega \in \Omega:\; X(\omega)^2 &lt; (Y(\omega) + Z(\omega))/W(\omega)\}\right),\]</span> and <span class="math display">\[\EE((XY-ZW)^2) = \int_\Omega (X(\omega)Y(\omega) - Z(\omega)W(\omega))^2 \,d\PP(\omega),\]</span> and it is understood that we will never bother to make explicit what kind of object <span class="math inline">\(\omega\)</span> is. A subset of <span class="math inline">\(\Omega\)</span> to which <span class="math inline">\(\PP\)</span> assigns a probability is called an <em>event</em> and any function of <span class="math inline">\(\omega\)</span> is a <em>random variable</em>. If <span class="math inline">\(\PP(A) = 1\)</span>, we say <span class="math inline">\(A\)</span> occurs <em>almost surely</em>.</p>
<p>To do actual calculations of probabilities and expectations we use the distributions of the random variables involved in that particular calculation. The distribution of a random variable <span class="math inline">\(X(\omega)\)</span> is given by the <em>push-forward</em> measure defined as <span class="math inline">\(Q = \PP \circ X^{-1}\)</span>. That is, if <span class="math inline">\(X\)</span> has realizations in the sample space <span class="math inline">\(\cX\)</span>, and <span class="math inline">\(B\)</span> is a (measurable) subset of <span class="math inline">\(\cX\)</span>, then <span class="math display">\[Q(B) = \PP(X^{-1}(B)) = \PP(\{\omega \in \Omega:\; X(\omega) \in B \}).\]</span></p>
</section>
<section id="conditional-probability" class="level2">
<h2 class="anchored" data-anchor-id="conditional-probability">Conditional probability</h2>
<p>While it is beyond the scope of this course, measure theory also allows us to patch the definition of conditional probability and conditional expectation. Given two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, if <span class="math inline">\(\PP(B) &gt; 0\)</span>, we can unproblematically define the conditional probability of <span class="math inline">\(A\)</span> given <span class="math inline">\(B\)</span> as <span class="math inline">\(\PP(A \mid B) = \PP(A \cap B) / \PP(B)\)</span>, but this definition obviously fails when <span class="math inline">\(\PP(B) = 0\)</span>.</p>
<p>Generally speaking, we cannot necessarily define <span class="math inline">\(\PP(A \mid B)\)</span> for measure zero events <span class="math inline">\(B\)</span> (Homework 0 includes a problem illustrating the inherent ambiguity of this definition). But, for example, if <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are both continuous random variables with some dependence between them we would like to be able to discuss, e.g., the distribution or expectation of <span class="math inline">\(Y\)</span> given that <span class="math inline">\(X\)</span> takes on some specific value <span class="math inline">\(x\)</span>. We can do this by defining the conditional expectation <span class="math inline">\(\EE(Y \mid X)\)</span> as a <em>random variable</em> <span class="math inline">\(g(X)\)</span>, which has the property <span class="math inline">\(\EE[(Y - g(X)) 1_A(X)] = 0\)</span> for all (nice) subsets <span class="math inline">\(A\)</span>. By evaluating this function <span class="math inline">\(g\)</span> at <span class="math inline">\(x\)</span> we can answer the question we asked earlier. However, note this explanation is informal and brushes many important points under the rug; for a more complete explanation, take Stat 205A.</p>
<p>Having defined the conditional expectation, we can also ask about the conditional distribution of <span class="math inline">\(Y\)</span> by evaluating the conditional expectation on new random variables defined with indicator functions: <span class="math inline">\(\PP(Y \in A \mid X) = \EE[1_A(Y) \mid X]\)</span> .</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>A problem in the first homework will guide you step-by-step in constructing the kind of pathological set that makes the parenthetical caveat necessary when we are dealing with continuous spaces.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The requirement that <span class="math inline">\(\mu(\emptyset) = 0\)</span> is redundant if <span class="math inline">\(\mu(\cX)\)</span> is finite. Otherwise, it prevents us from assigning infinite measure to every set including <span class="math inline">\(\emptyset\)</span>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxyXG4vLyBJbXBvcnQgbGlicmFyaWVzIHVzaW5nIHJlcXVpcmVcclxuUGxvdCA9IHJlcXVpcmUoXCJAb2JzZXJ2YWJsZWhxL3Bsb3RcIilcclxuZDMgPSByZXF1aXJlKFwiZDNcIilcclxuXHJcbi8vIERlZmluZSB0aGUgR2F1c3NpYW4gZnVuY3Rpb25cclxuZnVuY3Rpb24gZ2F1c3NpYW4oeCwgbXUgPSAwLCBzaWdtYSA9IDEpIHtcclxuICByZXR1cm4gKDEgLyAoc2lnbWEgKiBNYXRoLnNxcnQoMiAqIE1hdGguUEkpKSkgKiBcclxuICAgIE1hdGguZXhwKC0wLjUgKiBNYXRoLnBvdygoeCAtIG11KSAvIHNpZ21hLCAyKSk7XHJcbn1cclxuXHJcbi8vIERlZmluZSBvdXIgZnVuY3Rpb24gZih4KSA9IDNnKHgtNCkgKyA1Zyh4LTcpXHJcbmZ1bmN0aW9uIGYoeCkge1xyXG4gIHJldHVybiAzICogZ2F1c3NpYW4oeCAtIDQsIDAsIDEpICsgNC44ICogZ2F1c3NpYW4oeCAtIDcsIDAsIDEpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBzbGlkZXIgZm9yICdjJ1xyXG52aWV3b2YgYyA9IElucHV0cy5yYW5nZShbMCwgNF0sIHtzdGVwOiAxLCBsYWJlbDogXCJuXCJ9KVxyXG5cclxuLy8gR2VuZXJhdGUgeCB2YWx1ZXNcclxueFZhbHVlcyA9IGQzLnJhbmdlKC0yLCAxMywgMC4wMSlcclxuXHJcbi8vIENhbGN1bGF0ZSB5IHZhbHVlc1xyXG5kYXRhID0geFZhbHVlcy5tYXAoeCA9PiAoe3gsIHk6IGYoeCl9KSlcclxuXHJcbi8vIENhbGN1bGF0ZSBMZWJlc2d1ZSBzZXRzIHdpdGggbXVsdGlwbGUgaW50ZXJ2YWxzXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUxlYmVzZ3VlU2V0cyhkYXRhLCBjKSB7XHJcbiAgY29uc3QgbWF4WSA9IGQzLm1heChkYXRhLCBkID0+IGQueSk7XHJcbiAgY29uc3Qgc2V0cyA9IGQzLnJhbmdlKDAsIE1hdGguY2VpbChtYXhZICogTWF0aC5wb3coMiwgYykpKS5tYXAoayA9PiB7XHJcbiAgICBjb25zdCBsb3dlciA9IGsgKiBNYXRoLnBvdygyLCAtYyk7XHJcbiAgICBjb25zdCB1cHBlciA9IChrICsgMSkgKiBNYXRoLnBvdygyLCAtYyk7XHJcbiAgICBjb25zdCBwb2ludHMgPSBkYXRhLmZpbHRlcihkID0+IGQueSA+IGxvd2VyICYmIGQueSA8PSB1cHBlcik7XHJcbiAgICBcclxuICAgIGlmIChwb2ludHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBJZGVudGlmeSBkaXN0aW5jdCBpbnRlcnZhbHNcclxuICAgICAgY29uc3QgaW50ZXJ2YWxzID0gW107XHJcbiAgICAgIGxldCBjdXJyZW50SW50ZXJ2YWwgPSBbcG9pbnRzWzBdXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAocG9pbnRzW2ldLnggLSBwb2ludHNbaS0xXS54IDw9IDAuMDExKSB7IC8vIEFsbG93IHNtYWxsIGdhcHNcclxuICAgICAgICAgIGN1cnJlbnRJbnRlcnZhbC5wdXNoKHBvaW50c1tpXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGludGVydmFscy5wdXNoKGN1cnJlbnRJbnRlcnZhbCk7XHJcbiAgICAgICAgICBjdXJyZW50SW50ZXJ2YWwgPSBbcG9pbnRzW2ldXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaW50ZXJ2YWxzLnB1c2goY3VycmVudEludGVydmFsKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgayxcclxuICAgICAgICBsb3dlcixcclxuICAgICAgICB1cHBlcixcclxuICAgICAgICBpbnRlcnZhbHM6IGludGVydmFscy5tYXAoaW50ZXJ2YWwgPT4gKHtcclxuICAgICAgICAgIHhNaW46IGQzLm1pbihpbnRlcnZhbCwgZCA9PiBkLngpLFxyXG4gICAgICAgICAgeE1heDogZDMubWF4KGludGVydmFsLCBkID0+IGQueCksXHJcbiAgICAgICAgICBwb2ludHM6IGludGVydmFsXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9KS5maWx0ZXIoc2V0ID0+IHNldCAhPT0gbnVsbCk7XHJcbiAgXHJcbiAgcmV0dXJuIHNldHM7XHJcbn1cclxuXHJcbmxlYmVzZ3VlU2V0cyA9IGNhbGN1bGF0ZUxlYmVzZ3VlU2V0cyhkYXRhLCBjKVxyXG5cclxuLy8gQ3JlYXRlIHRoZSBwbG90XHJcbnBsb3QgPSBQbG90LnBsb3Qoe1xyXG4gIG1hcmtzOiBbXHJcbiAgICBQbG90LmxpbmUoZGF0YSwge3g6IFwieFwiLCB5OiBcInlcIiwgc3Ryb2tlOiBcImdyYXlcIiwgc3Ryb2tlV2lkdGg6IDF9KSxcclxuICAgIFBsb3QuZG90KGxlYmVzZ3VlU2V0cy5mbGF0TWFwKHNldCA9PiBzZXQuaW50ZXJ2YWxzLmZsYXRNYXAoaW50ID0+IGludC5wb2ludHMpKSwge1xyXG4gICAgICB4OiBcInhcIiwgXHJcbiAgICAgIHk6IFwieVwiLCBcclxuICAgICAgZmlsbDogZCA9PiBkMy5zY2hlbWVDYXRlZ29yeTEwW2xlYmVzZ3VlU2V0cy5maW5kSW5kZXgocyA9PiBzLmludGVydmFscy5zb21lKGludCA9PiBpbnQucG9pbnRzLmluY2x1ZGVzKGQpKSkgJSAxMF0sXHJcbiAgICAgIHI6IDJcclxuICAgIH0pLFxyXG4gICAgUGxvdC5yZWN0WShsZWJlc2d1ZVNldHMuZmxhdE1hcChzZXQgPT4gXHJcbiAgICAgIHNldC5pbnRlcnZhbHMubWFwKGludCA9PiAoe1xyXG4gICAgICAgIHgxOiBpbnQueE1pbixcclxuICAgICAgICB4MjogaW50LnhNYXgsXHJcbiAgICAgICAgeTE6IDAsXHJcbiAgICAgICAgeTI6IHNldC5sb3dlcixcclxuICAgICAgICBjb2xvcjogc2V0LmtcclxuICAgICAgfSkpXHJcbiAgICApLCB7XHJcbiAgICAgIHgxOiBcIngxXCIsXHJcbiAgICAgIHgyOiBcIngyXCIsXHJcbiAgICAgIHkxOiBcInkxXCIsXHJcbiAgICAgIHkyOiBcInkyXCIsXHJcbiAgICAgIGZpbGw6IGQgPT4gZDMuc2NoZW1lQ2F0ZWdvcnkxMFtkLmNvbG9yICUgMTBdLFxyXG4gICAgICBmaWxsT3BhY2l0eTogMC4yLFxyXG4gICAgICBzdHJva2U6IGQgPT4gZDMuc2NoZW1lQ2F0ZWdvcnkxMFtkLmNvbG9yICUgMTBdLFxyXG4gICAgICBzdHJva2VPcGFjaXR5OiAwLjVcclxuICAgIH0pXHJcbiAgXSxcclxuICB5OiB7XHJcbiAgICBkb21haW46IFswLCBkMy5tYXgoZGF0YSwgZCA9PiBkLnkpICogMS4xXSxcclxuICAgIGxhYmVsOiBcImYoeClcIlxyXG4gIH0sXHJcbiAgeDoge1xyXG4gICAgZG9tYWluOiBbLTIsIDEzXSxcclxuICAgIGxhYmVsOiBcInhcIlxyXG4gIH0sXHJcbiAgc3R5bGU6IHtcclxuICAgIGJhY2tncm91bmRDb2xvcjogXCJ3aGl0ZVwiXHJcbiAgfSxcclxuICB3aWR0aDogODAwLFxyXG4gIGhlaWdodDogNTAwXHJcbn0pXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnYycpIn1dfQ==
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../reader";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ajay8005\.github\.io\/personal-website\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>